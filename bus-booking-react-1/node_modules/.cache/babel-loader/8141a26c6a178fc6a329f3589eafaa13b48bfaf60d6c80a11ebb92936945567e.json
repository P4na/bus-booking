{"ast":null,"code":"var _jsxFileName = \"/home/studente/Documenti/git/bus-booking-app/bus-booking-react-1/src/components/BusMatrix.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport pgAxios from \"../api/pgAxios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const BusMatrix = () => {\n  _s();\n  const BUS_API = '/api/find-seats-by-bus/';\n  const {\n    id\n  } = useParams();\n  const [seats, setSeats] = useState([]);\n  const [bookedSeats, setBookedSeats] = useState([]);\n  const GenerateMatrix = () => {\n    var columns = 4;\n    var k = 0;\n    var lista = [];\n    for (let i = 0; i < seats.length; i++) {\n      if (k === columns) {\n        lista.push( /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 28\n        }, this));\n        k = 0;\n      }\n      k++;\n      lista.push( /*#__PURE__*/_jsxDEV(\"input\", {\n        id: `${seats[i].id}`,\n        type: \"checkbox\",\n        onClick: saveSeat\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 24\n      }, this));\n    }\n    return lista;\n  };\n  const searchRoute = async () => {\n    try {\n      await pgAxios.get(BUS_API + `${id}`).then(res => {\n        setSeats(res.data);\n      });\n    } catch (error) {\n      throw error;\n    }\n  };\n  const saveSeat = e => {\n    let item = bookedSeats;\n    let thereis = false;\n    for (let i = 0; i < item.length; i++) {\n      if (item[i] === e.target.id) {\n        item[i] = null;\n        thereis = true;\n      }\n    }\n    if (thereis === false) {\n      item.push(e.target.id);\n    }\n    let newItem = item.filter(el => {\n      return el !== null;\n    });\n    console.log(newItem);\n    setBookedSeats(newItem);\n    localStorage.setItem(\"bookedSeats\", bookedSeats);\n    var inputt = document.getElementById(e.target.id).checked;\n    console.log(inputt);\n  };\n  useEffect(() => {\n    searchRoute();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Matrix\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Select a seat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(GenerateMatrix, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(BusMatrix, \"QSVpSr1A04fC3JpV7WHiMZnaYLM=\", false, function () {\n  return [useParams];\n});\n_c = BusMatrix;\nvar _c;\n$RefreshReg$(_c, \"BusMatrix\");","map":{"version":3,"names":["useEffect","useState","useParams","pgAxios","BusMatrix","BUS_API","id","seats","setSeats","bookedSeats","setBookedSeats","GenerateMatrix","columns","k","lista","i","length","push","saveSeat","searchRoute","get","then","res","data","error","e","item","thereis","target","newItem","filter","el","console","log","localStorage","setItem","inputt","document","getElementById","checked"],"sources":["/home/studente/Documenti/git/bus-booking-app/bus-booking-react-1/src/components/BusMatrix.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { useParams } from \"react-router-dom\"\nimport pgAxios from \"../api/pgAxios\"\n\nexport const BusMatrix = () => {\n    const BUS_API = '/api/find-seats-by-bus/'\n\n    const { id } = useParams()\n    const [seats, setSeats] = useState([])\n    const [bookedSeats, setBookedSeats] = useState([])\n\n    const GenerateMatrix = () => {\n        var columns = 4\n        var k = 0\n        var lista = []\n        for (let i = 0; i < seats.length; i++) {\n            if (k === columns) {\n                lista.push(<br />)\n                k = 0\n            }\n            k++\n            lista.push(<input id={`${seats[i].id}`} type={\"checkbox\"} onClick={saveSeat}/>)\n        }\n        return lista\n    }\n\n    const searchRoute = async () => {\n        try {\n\n            await pgAxios.get(BUS_API + `${id}`)\n                .then((res) => {\n                    setSeats(res.data)\n                })\n        } catch (error) {\n            throw error\n        }\n    }\n\n    const saveSeat = (e) => {\n        let item = bookedSeats\n        let thereis = false\n        for(let i = 0; i < item.length; i++){\n            if(item[i] === e.target.id){\n                item[i] = null\n                thereis = true\n            }\n        }\n        if (thereis === false) {\n            item.push(e.target.id)\n        } \n        let newItem = item.filter(el => {return el!==null})\n        console.log(newItem)\n        setBookedSeats(newItem)\n        localStorage.setItem(\"bookedSeats\",bookedSeats)\n        var inputt = document.getElementById(e.target.id).checked\n        console.log(inputt)\n    }\n\n    useEffect(() => { searchRoute() }, [])\n\n\n    return (\n        <>\n            <h1>Matrix</h1>\n            <h3>Select a seat</h3>\n            <GenerateMatrix />\n        </>\n    )\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}